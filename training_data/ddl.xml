<tables>
    <table-ddl>
      CREATE TABLE btdpcn_published_prd.sdds_common.btdpcn_v_fact_crm_order_detail (
        brand_code                              STRING            COMMENT '品牌数字代码',
        program_code                            STRING            COMMENT '品牌英文代码-联合主键，比如lancome,ysl,gac,shu,ys,kie,gac,he,bio,pra,vlt,ca',
        order_no                                STRING            COMMENT '订单编号-联合主键,用来计算订单数',
        merged_c_code                           STRING            COMMENT '合卡后的顾客编号',
        trade_time                              STRING            COMMENT '订单创建时间',
        order_time                              STRING            COMMENT '订单交易时间(Online使用payment_time,Offline使用Trade_time)',
        order_date                              STRING            COMMENT 'order_time-yyyy-MM-dd',
        channel                                 STRING            COMMENT '渠道,线上 Online 线下 Offline',
        subchannel                              STRING            COMMENT '子渠道, 纯线下 in(DS,BTQ)',
        sub_subchannel                          STRING            COMMENT '子子渠道-细分 ',
        source_order_type                       STRING            COMMENT '原订单类型（fixed：现货订单 step：预售尾单 presale：预售订单 finalNopaid：预售尾单未付款 history：历史）',
        order_type                              INT               COMMENT '订单状态:1=正单,2=退单,0=其他状态',
        store_no                                STRING            COMMENT '柜台',
        terminal_code                           STRING            COMMENT '终端门店代码',
        terminal_name                           STRING            COMMENT '门店名称',
        terminal_region                         STRING            COMMENT 'terminal_code-区域',
        terminal_director                       STRING            COMMENT '柜台经理',
        terminal_regional_director              STRING            COMMENT '地区经理',
        terminal_level                          STRING            COMMENT '柜台等级',
        terminal_trainer_name                   STRING            COMMENT '培训师',
        trade_price                             DECIMAL(18,2)     COMMENT '订单交易金额',
        discount_price                          DECIMAL(18,2)     COMMENT '折扣金额',
        product_qty                             INT               COMMENT '订单商品数量(不含小样)',
        product_qty_with_sample                 INT               COMMENT '订单商品数量(含小样)',
        trans                                   INT               COMMENT '0=0元单,1=消费,-1=退单(sales金额=0 为0,其他取status,status为空则取0)',
        detail_trans                            INT               COMMENT '同一订单中，至少包含一个YFG则此单标记为1（随机打在某一个YFG上）',
        bom_item_code                           STRING            COMMENT '套餐编码',
        bom_type                                STRING            COMMENT '套装类型',
        material_code                           STRING            COMMENT '产品代码',
        material_name_cn                        STRING            COMMENT '商品名称',
        material_type                           STRING            COMMENT '产品类型',
        yfg_flag                                INT               COMMENT '1=正品,0=小样',
        item_list_price                         DECIMAL(18,2)     COMMENT '链接价',
        item_price                              DECIMAL(18,2)     COMMENT '单价',
        sales                                   DECIMAL(18,2)     COMMENT '明细实收金额',
        item_qty_with_sample                    INT               COMMENT '购买商品数量(含小样)',
        item_qty                                INT               COMMENT '购买商品数量,item_qty为空取1(不含小样)',
        sub_material_code                       STRING            COMMENT '子产品代码',
        sub_material_name_cn                    STRING            COMMENT '子产品名称',
        ba_code                                 STRING            COMMENT 'BA 编号',
        ba_name                                 STRING            COMMENT 'BA名称',
        is_vm_order                             INT               COMMENT '是否为派样机订单:1=是,0=否',
        is_special_sample_order                 INT               COMMENT '是否为特殊金额小样订单:1=是，0=否',
        is_group_buy                            INT               COMMENT '是否为团购订单:1=是 0=否 ',
        is_guest                                INT               COMMENT '是否为游客订单:1=是 0=否 ',
        is_big_order                            INT               COMMENT '是否为大单客订单:1=是 0=否',
        default_flag                            INT               COMMENT '0：正常订单，1：特殊订单组合（例：团购、游客、天猫小样）',
        is_member                               STRING            COMMENT '是否是会员:Y:是,N:否',
        gender                                  STRING            COMMENT '顾客性别: F-女,M-男,Unkonwn-未知',
        birthday                                STRING            COMMENT '会员生日，计算年龄时用订单的年份减去birthday的年份得到，以[15,80]作为有效年龄',
        tier_code                               STRING            COMMENT '会员等级code-个别品牌修改过',
        tier_name                               STRING            COMMENT '会员等级名称-个别品牌修改过',
        manager_ba_name                         STRING            COMMENT '客户管理BA名称',
        manager_counter_code                    STRING            COMMENT '客户管理门店',
        first_order_date                        STRING            COMMENT '会员的首单日期',
        first_order_no                          STRING            COMMENT '品牌首单订单号',
        second_order_date                       STRING            COMMENT '第二次购买日期',
        last_second_order_date                  STRING            COMMENT '倒数第二次购买日期',
        consent_status                          STRING            COMMENT 'consent状态:0=有渠道同意沟通,1=无渠道同意',
        mobile_num                              STRING            COMMENT '顾客手机(AES256)',
        mobile_num_md5                          STRING            COMMENT '顾客手机(md5)',
        mobile_num_md5_u16                      STRING            COMMENT '顾客手机(md5 for siebel)',
        material_group_code                     STRING            COMMENT 'material group',
        material_class_name_en_lv1_local        STRING            COMMENT '9层等级-locally',
        material_class_name_en_lv2_local        STRING            COMMENT '9层等级-locally',
        material_class_name_en_lv3_local        STRING            COMMENT '9层等级-locally',
        material_class_name_en_lv4_local        STRING            COMMENT '9层等级-locally',
        material_class_name_en_lv5_local        STRING            COMMENT '9层等级-locally',
        material_class_name_en_lv6_local        STRING            COMMENT '9层等级-locally',
        material_class_name_en_lv7_local        STRING            COMMENT '9层等级-locally',
        material_class_name_en_lv8_local        STRING            COMMENT '9层等级-locally',
        material_class_name_en_lv9_local        STRING            COMMENT '9层等级-locally',
        material_class_name_lv11_local          STRING            COMMENT '11层等级-locally',
        is_mtd_active_member_flag               INT               COMMENT 'MTD内是否为活跃客户 1：是 0：否',
        ytd_active_arr                          ARRAY<INT>        COMMENT 'YTD活跃标记数组',
        r12_active_arr                          ARRAY<INT>        COMMENT 'R12活跃标记数组',
        platform_user_id                        STRING            COMMENT '平台用户ID(天猫的ID 京东的pin码)',
        tmall_ouid                              STRING            COMMENT 'Tmall同一家店的会员唯一标识',
        tmall_omid                              STRING            COMMENT 'Tmall同一集团下的会员唯一标识',
        data_source                             STRING            COMMENT 'MARS：门店柜台 mobile：官小 ouid：天猫 taobaoid：天猫 TTX-TIKTOK：抖音 union_code：微信
                                                                          JD：京东自营 nacsent：天猫 TTX：天猫 TTX-CLOUD：云店 TTX-OMS：官小 history：历史
                                                                          pin：京东自营/POP JD-POP：京东POP vipCode：唯品会 EC-ARVATO：官小 VM：无人售卖机',
        mars_data_source                        STRING            COMMENT 'Mars数据来源',
        pos_code                                STRING            COMMENT '收银机编号',
        campaign_code                           STRING            COMMENT '活动编号',
        original_order_no                       STRING            COMMENT '退单的原始订单ID',
        receive_phone                           STRING            COMMENT '收件人电话',
        receive_person                          STRING            COMMENT '收件人',
        receive_address                         STRING            COMMENT '收货地址',
        receive_city_name                       STRING            COMMENT '收货城市',
        line_city_name                          STRING            COMMENT '线下：terminal对应城市 线上：收货城市',
        province_name                           STRING            COMMENT 'line_city_name 对应省份',
        line_city_level                         STRING            COMMENT '城市等级',
        earnest_amount                          DECIMAL(18,2)     COMMENT '定金金额',
        basic_price_used                        DECIMAL(18,2)     COMMENT '购物金',
        expand_price_used                       DECIMAL(18,2)     COMMENT '权益金',
        post_amount                             DECIMAL(18,2)     COMMENT '邮费',
        is_order_header                         INT               COMMENT '单头标记 1:是 0：否',
        yfg_sum_sales                           DECIMAL(18,2)     COMMENT '正单YFG金额累计',
        uni_id                                  STRING            COMMENT 'union id',
        uni_city_code                           STRING            COMMENT 'union id 城市代码',
        uni_gender                              STRING            COMMENT 'union id 性别',
        uni_age_tier                            STRING            COMMENT 'union id 年龄等级',
        uni_age                                 STRING            COMMENT 'union id 年龄',
        nick_name                               STRING            COMMENT '淘客昵称 from sellout',
        sales_source_level1                     STRING            COMMENT 'KOL 专属字段 from sellout',
        sales_source_level2                     STRING            COMMENT 'KOL 专属字段 from sellout',
        sales_source_level3                     STRING            COMMENT 'KOL 专属字段 from sellout',
        order_line_id                           STRING            COMMENT '原始订单明细ID',
        bom_quantity                            DECIMAL(18,2)	    COMMENT '订单套包数量',
        is_offsetting_orders                    STRING            COMMENT '正负单抵消：1:是 0:否',
        onedata_create_time                     STRING            COMMENT '创建时间',
        onedata_update_time                     STRING            COMMENT '更新时间',
        onedata_operator                        STRING            COMMENT '操作人',
        onedata_update_time2                    STRING            COMMENT '更新时间',
        onedata_update_time3                    STRING            COMMENT '更新时间',
        onedata_partition_source                STRING            COMMENT '品牌代码',
        onedata_partition                       STRING            COMMENT '业务月份(from order_time)yyyy-MM'
      )
    </table-ddl>
    <table-ddl>
      CREATE TABLE btdpcn_published_prd.sdds_common.btdpcn_v_dim_crm_member (
        program_code	STRING	COMMENT '品牌code',
        c_code	STRING	COMMENT '顾客编号,PK',
        email	STRING	COMMENT '顾客电子邮件地址',
        gender	STRING	COMMENT '顾客性别 M：男  F：女 null：未知',
        birthday	STRING	COMMENT '顾客生日',
        enroll_channel	STRING	COMMENT '顾客入会渠道',
        is_member	STRING	COMMENT '是否是会员 Y: 是  N: 否',
        enrollment_store_code	STRING	COMMENT '顾客入会门店编号',
        prefer_store_code	STRING	COMMENT '顾客偏好门店编号',
        is_black_list	STRING	COMMENT '是否在黑名单内1: 在 0: 不在',
        tier_code	STRING	COMMENT '顾客当前等级-个别品牌调整过',
        tier_name	STRING	COMMENT '等级名称-个别品牌调整过',
        original_tier_code	STRING	COMMENT '顾客当前等级',
        original_tier_name	STRING	COMMENT '等级名称',
        tier_begin_date	STRING	COMMENT '顾客等级开始时间',
        tier_expiry_date	STRING	COMMENT '顾客等级结束时间',
        consent_status	STRING	COMMENT 'consent状态:0=有渠道同意沟通,1=无渠道同意',
        create_date	STRING	COMMENT '创建日期',
        spending_r36	DECIMAL(18,2)	COMMENT '客户总的消费金额[近3年内]',
        product_qty_r36	INT	COMMENT '购买产品数量[近3年内]',
        sample_qty_r36	INT	COMMENT '购买小样数量[近3年内]',
        frequency_r36	INT	COMMENT '购买频次（订单数量）[近3年内]',
        frequency_r12	INT	COMMENT '购买频次[近1年内]',
        subchannels_r36	INT	COMMENT '购买的子渠道数量[近3年内]',
        is_prospect_r36	INT	COMMENT '是否是潜在客户:有领过小样[近3年内]',
        first_order_date	STRING	COMMENT '品牌首单时间',
        first_order_channel	STRING	COMMENT '品牌首单渠道',
        first_order_subchannel	STRING	COMMENT '品牌首单子渠道',
        first_order_no	STRING	COMMENT '品牌首单订单号',
        first_order_store_no	STRING	COMMENT '品牌首单柜台',
        second_order_date	STRING	COMMENT '品牌第二单时间',
        last_second_order_date	STRING	COMMENT '品牌倒数第二次购买日期',
        last_order_date	STRING	COMMENT '品牌最后一单时间',
        manager_ba_code	STRING	COMMENT '客户管理BA（最多购买门店）',
        manager_ba_name	STRING	COMMENT '客户管理BA姓名（最多购买门店）',
        manager_counter_code	STRING	COMMENT '客户管理门店（最多购买门店）',
        manage_city_name_cn	STRING	COMMENT '管理城市（最多购买门店）',
        is_active_r36	INT	COMMENT '标记近3年内是否是活跃客户',
        manager_counter_channel	STRING	COMMENT '客户管理门店（最多购买门店）渠道',
        manager_counter_subchannel	STRING	COMMENT '客户管理门店（最多购买门店）子渠道',
        mobile_num	STRING	COMMENT '顾客手机(AES256)',
        mobile_num_md5	STRING	COMMENT '顾客手机(md5)',
        mobile_num_md5_u16	STRING	COMMENT '顾客手机(md5 for siebel)',
        register_ba_code	STRING	COMMENT '注册ba代码',
        register_ba_name	STRING	COMMENT '注册ba名称',
        register_channel	STRING	COMMENT '注册渠道',
        register_subchannel	STRING	COMMENT '注册子渠道',
        before_admin_ba	STRING	COMMENT '前管理BA',
        onedata_create_time	STRING	COMMENT '创建时间',
        onedata_update_time	STRING	COMMENT '更新时间',
        onedata_operator	STRING	COMMENT '操作人',
        hash_flag	INT	COMMENT '1:相对于订单宽表有字段更新 0:无变化',
        onedata_partition_source	STRING	COMMENT '品牌'
      )
    </table-ddl>
    <table-ddl>
      CREATE TABLE btdpcn_published_prd.sdds_consumer.btdpcn_v_fact_crm_consumer_coupon_history (
        brand_code                STRING COMMENT '品牌数字代码',
        seq_num                   STRING COMMENT '自增主键id',
        send_record_code          STRING COMMENT '卡券发送记录id，关联vw_crm_consumer_coupon_send.seq_num',
        coupon_type_code          STRING COMMENT '卡券id',
        coupon_code               STRING COMMENT '卡券detail id，弃用',
        create_time               STRING COMMENT '卡券发送时间',
        verify_status             STRING COMMENT '卡券核销状态 0是未核销 1是已核销',
        verify_time               STRING COMMENT '卡券核销时间',
        verify_extra_info         STRING COMMENT '卡券核销信息',
        c_code                    STRING COMMENT '客户编号，可关联btdpcn_v_fact_crm_order_detail.merged_c_code和btdpcn_v_dim_crm_member.c_code',
        program_code              STRING COMMENT '品牌英文代码，可关联btdpcn_v_fact_crm_order_detail.program_code和btdpcn_v_dim_crm_member.program_code',
        effective_start_time      STRING COMMENT '卡券有效期开始时间',
        effective_end_time        STRING COMMENT '卡券有效期结束时间',
        appoint_time              STRING COMMENT '卡券预约时间',
        appoint_counter           STRING COMMENT '卡券预约柜台编号',
        send_extra_info           STRING COMMENT '扩展信息',
        onedata_partition_source  STRING COMMENT '【分区字段】品牌数字code'
      )
    </table-ddl>
    <table-ddl>
      CREATE TABLE IF NOT EXISTS btdpcn_published_prd.sdds_consumer.btdpcn_v_dim_crm_counter (
        program_code                    STRING     COMMENT '品牌-联合主键，可与btdpcn_v_fact_crm_consumer_coupon_history.program_code关联',
        store_no                        STRING     COMMENT '门店code-联合主键',
        store_name                      STRING     COMMENT '门店名称',
        terminal_code                   STRING     COMMENT 'mdmterminal编号',
        crm_counter_code                STRING     COMMENT '柜台代码',
        city_name_cn                    STRING     COMMENT '门店城市',
        city_code                       STRING     COMMENT 'mdm城市code',
        province_name_cn                STRING     COMMENT '门店省份',
        province_code                   STRING     COMMENT '门店省份code',
        region_name_cn                  STRING     COMMENT '区域名称',
        store_level                     STRING     COMMENT '门店等级',
        channel                         STRING     COMMENT '渠道名称',
        subchannel                      STRING     COMMENT '子渠道名称',
        sub_subchannel                  STRING     COMMENT '子渠道拓展名称',
        trainer_code                    STRING     COMMENT '培训师code',
        trainer_name                    STRING     COMMENT '培训师名称',
        regional_director               STRING     COMMENT '当前柜台大区经理',
        director                        STRING     COMMENT '当前柜台主管',
        status                          STRING     COMMENT '店铺状态',
        channel_type_code               STRING     COMMENT '渠道类型代码',
        channel_type                    STRING     COMMENT '渠道类型',
        open_date                       STRING     COMMENT '店铺开始时间',
        close_date                      STRING     COMMENT '店铺关闭时间',
        lfl_start_date                  STRING     COMMENT 'lfl开店时间',
        lfl_end_date                    STRING     COMMENT 'lfl关店时间',
        onedata_partition_source        STRING     COMMENT '品牌'
      )
    </table-ddl>
</tables>
